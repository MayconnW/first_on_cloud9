{"filter":false,"title":"user_session.rb","tooltip":"/app/models/user_session.rb","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":39,"column":3},"action":"insert","lines":["class UserSession","    include ActiveModel::Model","    ","    attr_accessor :email, :password","    validates_presence_of :email, :password","    ","    def initialize(session, attributes={})","        @session = session","        @email = attributes[:email]","        @password = attributes[:password]","    end","    ","    def authenticate!","        user = User.authenticate(@email, @password)","        ","        if user.present?","            store(user)","        else","            errors.add(:base, :invalid_login)","            false","        end","    end","    ","    def store(user)","        @session[:user_id] = user.id","    end","    ","    def current_user","        User.find(@session[:user_id])","    end","    ","    def user_signed_in?","        @session[:user_id].present?","    end","    ","    def destroy","        @session[:user_id] = nil","    end","    ","end"],"id":1}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":18,"column":45},"end":{"row":18,"column":45},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1434138964463,"hash":"feb26718ffc7568fac83cd231ed27cdbb7e163a9"}